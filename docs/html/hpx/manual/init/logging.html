<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Logging</title>
<link rel="stylesheet" href="../../../src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../../../index.html" title="HPX 0.9.9">
<link rel="up" href="../init.html" title="Launching HPX">
<link rel="prev" href="configuration/loading_components.html" title="Loading Components">
<link rel="next" href="commandline.html" title="HPX Command Line Options">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="HPX - High Performance ParalleX" width="440" height="104" src="../../../images/hpx_0_9_9_draft.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="configuration/loading_components.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../init.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="commandline.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="hpx.manual.init.logging"></a><a class="link" href="logging.html" title="Logging">Logging</a>
</h4></div></div></div>
<p>
          <span class="emphasis"><em>HPX</em></span> uses a sophisticated logging framework allowing
          to follow in detail what operations have been performed inside the <span class="emphasis"><em>HPX</em></span>
          library in what sequence. This information proves to be very useful for
          diagnosing problems or just for improving the understanding what is happening
          in <span class="emphasis"><em>HPX</em></span> as a consequence of invoking <span class="emphasis"><em>HPX</em></span>
          API functionality.
        </p>
<h6>
<a name="hpx.manual.init.logging.h0"></a>
          <span class="phrase"><a name="hpx.manual.init.logging.default_logging"></a></span><a class="link" href="logging.html#hpx.manual.init.logging.default_logging">Default
          Logging</a>
        </h6>
<p>
          Enabling default logging is a simple process. The detailed description
          in the remainder of this section explains different ways to customize the
          defaults. Default logging can be enabled by using one of the following:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              a command line switch <a class="link" href="commandline.html" title="HPX Command Line Options"><code class="computeroutput"><span class="special">--</span><span class="identifier">hpx</span><span class="special">:</span><span class="identifier">debug</span><span class="special">-</span><span class="identifier">hpx</span><span class="special">-</span><span class="identifier">log</span></code></a>,
              which will enable logging to the console terminal
            </li>
<li class="listitem">
              the command line switch <a class="link" href="commandline.html" title="HPX Command Line Options"><code class="computeroutput"><span class="special">--</span><span class="identifier">hpx</span><span class="special">:</span><span class="identifier">debug</span><span class="special">-</span><span class="identifier">hpx</span><span class="special">-</span><span class="identifier">log</span><span class="special">=&lt;</span><span class="identifier">filename</span><span class="special">&gt;</span></code></a>, which enables logging to
              a given file <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">filename</span><span class="special">&gt;</span></code>, or
            </li>
<li class="listitem">
              setting an environment variable <code class="computeroutput"><span class="identifier">HPX_LOGLEVEL</span><span class="special">=&lt;</span><span class="identifier">loglevel</span><span class="special">&gt;</span></code> while running the <span class="emphasis"><em>HPX</em></span>
              application. In this case <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">loglevel</span><span class="special">&gt;</span></code>
              should be a number between (or equal to) <code class="computeroutput"><span class="number">1</span></code>
              and <code class="computeroutput"><span class="number">5</span></code>, where <code class="computeroutput"><span class="number">1</span></code> means minimal logging and <code class="computeroutput"><span class="number">5</span></code> causes to log all available messages.
              When setting a the environment variable the logs will be written to
              a file named <code class="computeroutput"><span class="identifier">hpx</span><span class="special">.&lt;</span><span class="identifier">PID</span><span class="special">&gt;.</span><span class="identifier">log</span></code>in the current working directory,
              where <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">PID</span><span class="special">&gt;</span></code> is the process id of the console
              instance of the application.
            </li>
</ul></div>
<h6>
<a name="hpx.manual.init.logging.h1"></a>
          <span class="phrase"><a name="hpx.manual.init.logging.customizing_logging"></a></span><a class="link" href="logging.html#hpx.manual.init.logging.customizing_logging">Customizing
          Logging</a>
        </h6>
<p>
          Generally, logging can be customized either using environment variable
          settings or using by an ini configuration file. Logging is generated in
          several categories, each of which can be customized independently. All
          customizable configuration parameters have reasonable defaults, allowing
          to use logging without any additional configuration effort. The following
          table lists the available categories.
        </p>
<div class="table">
<a name="hpx.manual.init.logging.logging_categories"></a><p class="title"><b>Table&#160;9.&#160;Logging categories</b></p>
<div class="table-contents"><table class="table" summary="Logging categories">
<colgroup>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Category
                  </p>
                </th>
<th>
                  <p>
                    Category shortcut
                  </p>
                </th>
<th>
                  <p>
                    Information to be generated
                  </p>
                </th>
<th>
                  <p>
                    Environment variable
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    General
                  </p>
                </td>
<td>
                  <p>
                    None
                  </p>
                </td>
<td>
                  <p>
                    Logging information generated by different subsystems of <span class="emphasis"><em>HPX</em></span>,
                    such as thread-manager, parcel layer, LCOs, etc.
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">HPX_LOGLEVEL</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    AGAS
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">AGAS</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Logging output generated by the AGAS subsystem
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">HPX_AGAS_LOGLEVEL</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    Application
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">APP</span></code>
                  </p>
                </td>
<td>
                  <p>
                    Logging generated by applications.
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="identifier">HPX_APP_LOGLEVEL</span></code>
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
          By default, all logging output is redirected to the console instance of
          an application, where it is collected and written to a file, one file for
          each logging category.
        </p>
<p>
          Each logging category can be customized at two levels, the parameters for
          each are stored in the ini configuration sections <code class="computeroutput"><span class="identifier">hpx</span><span class="special">.</span><span class="identifier">logging</span><span class="special">.</span><span class="identifier">CATEGORY</span></code>
          and <code class="computeroutput"><span class="identifier">hpx</span><span class="special">.</span><span class="identifier">logging</span><span class="special">.</span><span class="identifier">console</span><span class="special">.</span><span class="identifier">CATEGORY</span></code> (where 'CATEGORY' is the category
          shortcut as listed in the table above). The former influences logging at
          the source locality and the latter modifies the logging behaviour for each
          of the categories at the console instance of an application.
        </p>
<h6>
<a name="hpx.manual.init.logging.h2"></a>
          <span class="phrase"><a name="hpx.manual.init.logging.levels"></a></span><a class="link" href="logging.html#hpx.manual.init.logging.levels">Levels</a>
        </h6>
<p>
          All <span class="emphasis"><em>HPX</em></span> logging output have seven different logging
          levels. These levels can be set explicitly or through environmental variables
          in the main <span class="emphasis"><em>HPX</em></span> ini file as shown below. The logging
          levels and their associated integral values are shown in the table below,
          ordered from most verbose to least verbose. By default, all <span class="emphasis"><em>HPX</em></span>
          logs are set to 0, e.g. all logging output is disabled by default.
        </p>
<div class="table">
<a name="hpx.manual.init.logging.logging_levels"></a><p class="title"><b>Table&#160;10.&#160;Logging levels</b></p>
<div class="table-contents"><table class="table" summary="Logging levels">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Logging level
                  </p>
                </th>
<th>
                  <p>
                    Integral value
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    &lt;debug&gt;
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="number">5</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    &lt;info&gt;
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="number">4</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    &lt;warning&gt;
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="number">3</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    &lt;error&gt;
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="number">2</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    &lt;fatal&gt;
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="number">1</span></code>
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    No logging
                  </p>
                </td>
<td>
                  <p>
                    <code class="computeroutput"><span class="number">0</span></code>
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><div class="tip"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../../../images/tip.png"></td>
<th align="left">Tip</th>
</tr>
<tr><td align="left" valign="top"><p>
            The easiest way to enable logging output is to set the environment variable
            corresponding to the logging category to an integral value as described
            in the table above. For instance, setting <code class="computeroutput"><span class="identifier">HPX_LOGLEVEL</span><span class="special">=</span><span class="number">5</span></code> will
            enable full logging output for the general category. Please note, that
            the syntax and means of setting environment variables varies between
            operating systems.
          </p></td></tr>
</table></div>
<h6>
<a name="hpx.manual.init.logging.h3"></a>
          <span class="phrase"><a name="hpx.manual.init.logging.configuration"></a></span><a class="link" href="logging.html#hpx.manual.init.logging.configuration">Configuration</a>
        </h6>
<p>
          Logs will be saved to destinations as configured by the user. By default,
          logging output is saved on the console instance of an application to <code class="computeroutput"><span class="identifier">hpx</span><span class="special">.&lt;</span><span class="identifier">CATEGORY</span><span class="special">&gt;.&lt;</span><span class="identifier">PID</span><span class="special">&gt;.</span><span class="identifier">log</span></code> (where <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">CATEGORY</span><span class="special">&gt;</span></code>
          and <code class="computeroutput"><span class="special">&lt;</span><span class="identifier">PID</span><span class="special">&gt;</span></code> are placeholders for the category shortcut
          and the OS process id). The output for the general logging category is
          saved to <code class="computeroutput"><span class="identifier">hpx</span><span class="special">.&lt;</span><span class="identifier">PID</span><span class="special">&gt;.</span><span class="identifier">log</span></code>. The default settings for the general
          logging category are shown here (the syntax is described in the section
          <a class="link" href="configuration/ini_format.html" title="The HPX INI File Format">The <span class="emphasis"><em>HPX</em></span>
          INI File Format</a>):
        </p>
<pre class="programlisting">[hpx.logging]
level = ${HPX_LOGLEVEL:0}
destination = ${HPX_LOGDESTINATION:console}
format = ${HPX_LOGFORMAT:(T%locality%/%hpxthread%.%hpxphase%/%hpxcomponent%) P%parentloc%/%hpxparent%.%hpxparentphase% %time%($hh:$mm.$ss.$mili) [%idx%]|\\n}
</pre>
<p>
          The logging level is taken from the environment variable <code class="computeroutput"><span class="identifier">HPX_LOGLEVEL</span></code> and defaults to zero, e.g.
          no logging. The default logging destination is read from the environment
          variable <code class="computeroutput"><span class="identifier">HPX_LOGDESTINATION</span></code>.
          On any of the localities it defaults to <code class="computeroutput"><span class="identifier">console</span></code>
          which redirects all generated logging output to the console instance of
          an application. The following table lists the possible destinations for
          any logging output. It is possible to specify more than one destination
          separated by whitespace.
        </p>
<div class="table">
<a name="hpx.manual.init.logging.logging_destinations"></a><p class="title"><b>Table&#160;11.&#160;Logging destinations</b></p>
<div class="table-contents"><table class="table" summary="Logging destinations">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Logging destination
                  </p>
                </th>
<th>
                  <p>
                    Description
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    file(&lt;filename&gt;)
                  </p>
                </td>
<td>
                  <p>
                    Direct all output to a file with the given &lt;filename&gt;.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    cout
                  </p>
                </td>
<td>
                  <p>
                    Direct all output to the local standard output of the application
                    instance on this locality.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    cerr
                  </p>
                </td>
<td>
                  <p>
                    Direct all output to the local standard error output of the application
                    instance on this locality.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    console
                  </p>
                </td>
<td>
                  <p>
                    Direct all output to the console instance of the application.
                    The console instance has its logging destinations configured
                    separately.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    android_log
                  </p>
                </td>
<td>
                  <p>
                    Direct all output to the (Android) system log (available on Android
                    systems only).
                  </p>
                </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
          The logging format is read from the environment variable <code class="computeroutput"><span class="identifier">HPX_LOGFORMAT</span></code> and it defaults to a complex
          format description. This format consists of several placeholder fields
          (for instance <code class="computeroutput"><span class="special">%</span><span class="identifier">locality</span><span class="special">%</span></code>) which will be replaced by concrete values
          when the logging output is generated. All other information is transferred
          verbatim to the output. The table below describes the available field placeholders.
          The separator character <code class="computeroutput"><span class="special">|</span></code>
          separates the logging message prefix formatted as shown and the actual
          log message which will replace the separator.
        </p>
<div class="table">
<a name="hpx.manual.init.logging.available_field_placeholders"></a><p class="title"><b>Table&#160;12.&#160;Available field placeholders</b></p>
<div class="table-contents"><table class="table" summary="Available field placeholders">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                  <p>
                    Name
                  </p>
                </th>
<th>
                  <p>
                    Description
                  </p>
                </th>
</tr></thead>
<tbody>
<tr>
<td>
                  <p>
                    locality
                  </p>
                </td>
<td>
                  <p>
                    The id of the locality on which the logging message was generated.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    hpxthread
                  </p>
                </td>
<td>
                  <p>
                    The id of the <span class="emphasis"><em>HPX</em></span>-thread generating this
                    logging output.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    hpxphase
                  </p>
                </td>
<td>
                  <p>
                    The phase<a href="#ftn.hpx.manual.init.logging.f0" class="footnote" name="hpx.manual.init.logging.f0"><sup class="footnote">[a]</sup></a> of the <span class="emphasis"><em>HPX</em></span>-thread generating
                    this logging output.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    hpxcomponent
                  </p>
                </td>
<td>
                  <p>
                    The local virtual address of the component which the current
                    <span class="emphasis"><em>HPX</em></span>-thread is accessing.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    parentloc
                  </p>
                </td>
<td>
                  <p>
                    The id of the locality where the <span class="emphasis"><em>HPX</em></span> thread
                    was running which initiated the current <span class="emphasis"><em>HPX</em></span>-thread.
                    The current <span class="emphasis"><em>HPX</em></span>-thread is generating this
                    logging output.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    hpxparent
                  </p>
                </td>
<td>
                  <p>
                    The id of the <span class="emphasis"><em>HPX</em></span>-thread which initiated
                    the current <span class="emphasis"><em>HPX</em></span>-thread. The current <span class="emphasis"><em>HPX</em></span>-thread
                    is generating this logging output.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    hpxparentphase
                  </p>
                </td>
<td>
                  <p>
                    The phase of the <span class="emphasis"><em>HPX</em></span>-thread when it initiated
                    the current <span class="emphasis"><em>HPX</em></span>-thread. The current <span class="emphasis"><em>HPX</em></span>-thread
                    is generating this logging output.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    time
                  </p>
                </td>
<td>
                  <p>
                    The time stamp for this logging outputline as generated by the
                    source locality.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    idx
                  </p>
                </td>
<td>
                  <p>
                    The sequence number of the logging output line as generated on
                    the source locality.
                  </p>
                </td>
</tr>
<tr>
<td>
                  <p>
                    osthread
                  </p>
                </td>
<td>
                  <p>
                    The sequence number of the OS-thread which executes the current
                    <span class="emphasis"><em>HPX</em></span>-thread.
                  </p>
                </td>
</tr>
</tbody>
<tbody class="footnotes"><tr><td colspan="2"><div id="ftn.hpx.manual.init.logging.f0" class="footnote"><p><a href="#hpx.manual.init.logging.f0" class="para"><sup class="para">[a] </sup></a>
                      The phase of a <span class="emphasis"><em>HPX</em></span>-thread counts how often
                      this thread has been activated
                    </p></div></td></tr></tbody>
</table></div>
</div>
<br class="table-break"><div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
            Not all of the field placeholder may be expanded for all generated logging
            output. If no value is available for a particular field it is replaced
            with a sequence of <code class="computeroutput"><span class="char">'-'</span></code> characters.
          </p></td></tr>
</table></div>
<p>
          Here is an example line from a logging output generated by one of the
          <span class="emphasis"><em>HPX</em></span> examples (please note that this is generated on
          a single line, without line break):
        </p>
<pre class="programlisting">(T00000000/0000000002d46f90.01/00000000009ebc10) P--------/0000000002d46f80.02 17:49.37.320 [000000000000004d]
    &lt;info&gt;  [RT] successfully created component {0000000100ff0001, 0000000000030002} of type: component_barrier[7(3)]
</pre>
<p>
          The default settings for the general logging category on the console is
          shown here:
        </p>
<pre class="programlisting">[hpx.logging.console]
level = ${HPX_LOGLEVEL:$[hpx.logging.level]}
destination = ${HPX_CONSOLE_LOGDESTINATION:file(hpx.$[system.pid].log)}
format = ${HPX_CONSOLE_LOGFORMAT:|}
</pre>
<p>
          These settings define how the logging is customized once the logging output
          is received by the console instance of an application. The logging level
          is read from the environment variable <code class="computeroutput"><span class="identifier">HPX_LOGLEVEL</span></code>
          (as set for the console instance of the application). The level defaults
          to the same values as the corresponding settings in the general logging
          configuration shown before. The destination on the console instance is
          set to be a file which name is generated based from its OS process id.
          Setting the environment variable <code class="computeroutput"><span class="identifier">HPX_CONSOLE_LOGDESTINATION</span></code>
          allows customization of the naming scheme for the output file. The logging
          format is set to leave the original logging output unchanged, as received
          from one of the localities the application runs on.
        </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2011-2014 The
      STE||AR Group, Louisiana State University<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">LICENSE_1_0.txt</a>
        or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="configuration/loading_components.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../init.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="commandline.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
