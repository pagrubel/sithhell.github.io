<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Function finalize</title>
<link rel="stylesheet" href="../src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../index.html" title="HPX 0.9.9">
<link rel="up" href="../header/hpx/hpx_finalize_hpp.html" title="Header &lt;hpx/hpx_finalize.hpp&gt;">
<link rel="prev" href="../header/hpx/hpx_finalize_hpp.html" title="Header &lt;hpx/hpx_finalize.hpp&gt;">
<link rel="next" href="finalize_idp17479232.html" title="Function finalize">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr><td valign="top"><img alt="HPX - High Performance ParalleX" width="440" height="104" src="../images/hpx_0_9_9_draft.png"></td></tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../header/hpx/hpx_finalize_hpp.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../header/hpx/hpx_finalize_hpp.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="finalize_idp17479232.html"><img src="../images/next.png" alt="Next"></a>
</div>
<div class="refentry">
<a name="hpx.finalize_idp17463392"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Function finalize</span></h2>
<p>hpx::finalize &#8212; Main function to gracefully terminate the the HPX runtime system. </p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="comment">// In header: &lt;<a class="link" href="../header/hpx/hpx_finalize_hpp.html" title="Header &lt;hpx/hpx_finalize.hpp&gt;">hpx/hpx_finalize.hpp</a>&gt;

</span>
<span class="keyword">int</span> <span class="identifier">finalize</span><span class="special">(</span><span class="keyword">double</span> shutdown_timeout<span class="special">,</span> <span class="keyword">double</span> localwait <span class="special">=</span> <span class="special">-</span><span class="number">1</span><span class="special">.</span><span class="number">0</span><span class="special">,</span> 
             <a class="link" href="error_code.html" title="Class error_code">error_code</a> <span class="special">&amp;</span> ec <span class="special">=</span> <span class="identifier">throws</span><span class="special">)</span><span class="special">;</span></pre></div>
<div class="refsect1">
<a name="idp18394064"></a><h2>Description</h2>
<p>The function <span class="emphasis"><em>hpx::finalize</em></span> is the main way to (gracefully) exit any HPX application. It should be called from one locality only (usually the console) and it will notify all connected localities to finish execution. Only after all other localities have exited this function will return, allowing to exit the console locality as well.</p>
<p>During the execution of this function the runtime system will invoke all registered shutdown functions (see <span class="emphasis"><em>hpx::init</em></span>) on all localities.</p>
<p>
The default value (<code class="computeroutput">-1.0</code>) will try to find a globally set timeout value (can be set as the configuration parameter <code class="computeroutput">hpx.shutdown_timeout</code>), and if that is not set or <code class="computeroutput">-1.0</code> as well, it will disable any timeout, each connected locality will wait for all existing HPX-threads to terminate.</p>
<p>
The default value (<code class="computeroutput">-1.0</code>) will try to find a globally set wait time value (can be set as the configuration parameter "hpx.finalize_wait_time"), and if this is not set or <code class="computeroutput">-1.0</code> as well, it will disable any addition local wait time before proceeding.</p>
<p>

</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>As long as <span class="emphasis"><em>ec</em></span> is not pre-initialized to <span class="emphasis"><em>hpx::throws</em></span> this function doesn't throw but returns the result code using the parameter <span class="emphasis"><em>ec</em></span>. Otherwise it throws an instance of <code class="computeroutput"><a class="link" href="exception.html" title="Class exception">hpx::exception</a></code>.</p></td></tr>
</table></div>
<p>
This function will block and wait for all connected localities to exit before returning to the caller. It should be the last HPX-function called by any application.</p>
<p>Using this function is an alternative to <span class="emphasis"><em>hpx::disconnect</em></span>, these functions do not need to be called both. </p>
<div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term">Parameters:</span></p></td>
<td><div class="variablelist"><table border="0" class="variablelist compact">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><code class="computeroutput">ec</code></span></p></td>
<td><p>[in,out] this represents the error status on exit, if this is pre-initialized to <span class="emphasis"><em>hpx::throws</em></span> the function will throw on error instead.</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">localwait</code></span></p></td>
<td><p>This parameter allows to specify a local wait time (in microseconds) before the connected localities will be notified and the overall shutdown process starts.</p></td>
</tr>
<tr>
<td><p><span class="term"><code class="computeroutput">shutdown_timeout</code></span></p></td>
<td><p>This parameter allows to specify a timeout (in microseconds), specifying how long any of the connected localities should wait for pending tasks to be executed. After this timeout, all suspended HPX-threads will be aborted. Note, that this function will not abort any running HPX-threads. In any case the shutdown will not proceed as long as there is at least one pending/running HPX-thread.</p></td>
</tr>
</tbody>
</table></div></td>
</tr>
<tr>
<td><p><span class="term">Returns:</span></p></td>
<td><p>This function will always return zero.</p></td>
</tr>
</tbody>
</table></div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2011-2014 The
      STE||AR Group, Louisiana State University<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">LICENSE_1_0.txt</a>
        or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../header/hpx/hpx_finalize_hpp.html"><img src="../images/prev.png" alt="Prev"></a><a accesskey="u" href="../header/hpx/hpx_finalize_hpp.html"><img src="../images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src="../images/home.png" alt="Home"></a><a accesskey="n" href="finalize_idp17479232.html"><img src="../images/next.png" alt="Next"></a>
</div>
</body>
</html>
